/**
 * MIT License
 * 
 * Copyright (c) 2021 Ardy Wu
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 */
"use strict";const lmn=(()=>{const e=(e,t)=>{const r="function"==typeof t?t():t,s=document.querySelector(`[data-id="${e}"`);return s&&(s.innerHTML=r),s},t=()=>{const e=e=>t=>r=>r(e)(t),t=e=>e((e=>t=>e)),r=e=>e((e=>e=>e)),s=new Map;return{has:e=>s.has(e),get:e=>s.has(e)?r(s.get(e)):void 0,set:(r,n)=>{const o=s.has(r)?s.get(r):void 0,a=o?(c=n,r=>e(t(r))(c))(o):e(r)(n);var c;s.set(r,a)}}},r=(e=>()=>{const t=e(),r=t.has,s=t.get,n=e(),o=(e,t)=>{(n.get(e)||[]).forEach((e=>e(t)))};return{has:r,get:s,set:(e,r)=>{t.set(e,r),o(e,r)},subscribe:(e,t)=>{const r=(n.get(e)||[]).concat(t);n.set(e,r)},unsubscribe:(e,t)=>{const r=(n.get(e)||[]).filter((e=>e!==t));n.set(e,r)}}})(t),s=(e=>()=>({has:e.has,get:e.get,set:e.set,subscribe:e.subscribe,unsubscribe:e.unsubscribe,load:(t,r,s={})=>{fetch(r,s||{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer"}).then((e=>e.json())).then((r=>e.set(t,r[t])))},save:(t,r,s,n={})=>{fetch(s,n||{method:"POST",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrerPolicy:"no-referrer",body:JSON.stringify(r)}).then((e=>e.json())).then((r=>e.set(t,r[t])))}}))(r()),n=((e,t)=>(r,s)=>{const n=e();var o="";const a=()=>{return e=n.get(o),t(r||"app",e);var e};return s.onpopstate=()=>a(),{add:(e,t,r)=>{n.set(e,r);const s=(n.get("nav")||[]).concat({url:e,caption:t});n.set("nav",s)},nav:()=>n.get("nav"),origin:()=>s.location.origin,pathname:()=>o,redraw:a,routeto:e=>{n.has(e)&&(o=e,s.history.pushState({},e,s.location.origin+"/#"+o),a())}}})(t,e);return{html:e=>(new DOMParser).parseFromString(e,"text/html").body.firstChild,render:e,state:t,store:r,repository:s,router:n}})();
